<div>
  <form method="post" action="/api/quit" class="header">
    <button type="submit" style="float: right;" title="Logg ut">x</button>
    <h1>‚≠ê üåü {{className}} üåü ‚≠ê </h1>
    <h2>fra {{school}}</h2>
    <div class="instruksjon">Kode: <b>{{classId}}</b></div>
  </form>
    
  <div class="col1">
  <div id="count">0</div> 
  <p>stykker!</p>
  <div id="timer">0:00 <br>
    <button id="startClock">Start klokke</button>
    <button id="resetClock">Tilbakestill klokke</button>
    <script type="text/javascript">
  (function() {
    var seconds = 0;
    var interval;
    var running = false;

    function resetClock() {
      seconds = 0;
      updateUI();
    };

    function incrementClock() {
      seconds++;
      updateUI();
    }

    function updateUI() {
      var hours = Math.floor(seconds / 3600);
      var minutes = Math.floor((seconds - hours * 3600) / 60);
      var secs = Math.floor(seconds - hours * 3600 - minutes * 60);
      document.getElementById("timer").firstChild.data =
        "" +
        (hours ? hours + ":" : "") +
        (hours ? String(100 + minutes).substr(-2) : minutes) +
        ":" +
        String(100 + secs).substr(-2);
    }

     function toggleClock(evt) {
      if (running) {
        running = false;
        clearInterval(interval);
        evt.target.firstChild.data = "Start klokke";
      } else {
        running = true;
        interval = setInterval(incrementClock, 1000);
        evt.target.firstChild.data = "Stopp klokke";
      }
    };
    document.getElementById('startClock').onclick = toggleClock;
    document.getElementById('resetClock').onclick = resetClock;
  })();
    </script>
  </div>
  </div>
  <div class="col2">
  <p class="instruksjon">
    <h2>Elever:</h2>
    <ul id="students"><li>(laster inn)</li></ul>
  </p>
</div>
</div>
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io('{{{socketConnectURL}}}');
  socket.on('state', function(payload) {
    console.log(payload);
    payload = JSON.parse(payload);
    if (payload.data.totals) {
      document.getElementById('count').firstChild.data = payload.data.totals;
    }
    if (payload.data.students) {
      document.getElementById('students').innerHTML = '<li>' + payload.data.students
      .map(student => student.name)
      .join('</li><li>');
    }
  });
</script>

